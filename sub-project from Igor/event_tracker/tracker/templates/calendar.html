 {% extends "base.html" %}

{% block content %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@event-calendar/build@3.10.0/event-calendar.min.css">
<script src="https://cdn.jsdelivr.net/npm/@event-calendar/build@3.10.0/event-calendar.min.js"></script>

    <div id="calendar"></div>

    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function() {
            // Инициализируем календарь через конструктор.
            // Обратите внимание: для работы данного примера требуется, чтобы календарь поддерживал такую инициализацию.
            let ec = new EventCalendar(document.getElementById('calendar'), {
                // URL, по которому календарь будет получать JSON-события
                eventSources: [{
                    // URL, по которому календарь запрашивает события
                    url: "{% url 'events_json' %}",
                    // HTTP-метод запроса (по умолчанию GET)
                    method: "GET",
                    // Дополнительные параметры, если нужны
                    extraParams: {}
                }],
                lazyFetching: false,
                // Вид календаря (например, месяц)
                view: 'dayGridMonth',
            });

            ec.refetchEvents();
        });
    </script>

{% endblock %}